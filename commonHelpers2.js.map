{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst dateInput = document.getElementById('datetime-picker');\r\nconst startBtn = document.querySelector('[data-start]');\r\nconst date = {\r\n  days: document.querySelector('[data-days]'),\r\n  hours: document.querySelector('[data-hours]'),\r\n  minutes: document.querySelector('[data-minutes]'),\r\n  seconds: document.querySelector('[data-seconds]'),\r\n};\r\nstartBtn.addEventListener('click', startTime);\r\nstartBtn.disabled = true;\r\n\r\nlet selectedDatesValue = '';\r\n\r\nflatpickr(dateInput, {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    checkDate(selectedDates[0]);\r\n    selectedDatesValue = selectedDates[0];\r\n  },\r\n});\r\n\r\nfunction startTime() {\r\n  startBtn.disabled = true;\r\n  dateInput.disabled = true;\r\n  const endTime = selectedDatesValue.getTime();\r\n  const currentTime = new Date().getTime();\r\n  let remainingTime = endTime - currentTime;\r\n  let intervalId = null;\r\n\r\n  function updateTimer() {\r\n    if (remainingTime > 0) {\r\n      const { days, hours, minutes, seconds } = convertMs(remainingTime);\r\n\r\n      date.days.textContent = days <= 9 ? '0' + days : days;\r\n      date.hours.textContent = hours <= 9 ? '0' + hours : hours;\r\n      date.minutes.textContent = minutes <= 9 ? '0' + minutes : minutes;\r\n      date.seconds.textContent = seconds <= 9 ? '0' + seconds : seconds;\r\n\r\n      remainingTime -= 1000;\r\n      intervalId = setTimeout(updateTimer, 1000);\r\n    } else {\r\n      date.days.textContent = '00';\r\n      date.hours.textContent = '00';\r\n      date.minutes.textContent = '00';\r\n      date.seconds.textContent = '00';\r\n      startBtn.disabled = true;\r\n      dateInput.disabled = false;\r\n      clearInterval(intervalId);\r\n      iziToast.show({\r\n        title: 'Time is up!',\r\n        color: 'green',\r\n        position: 'topLeft',\r\n      });\r\n    }\r\n  }\r\n\r\n  if (!selectedDatesValue) {\r\n    iziToast.show({ message: 'Please choose a date first.' });\r\n    return;\r\n  }\r\n\r\n  updateTimer();\r\n}\r\n\r\nfunction checkDate(date) {\r\n  if (date.getTime() < new Date().getTime()) {\r\n    startBtn.disabled = true;\r\n    iziToast.show({\r\n      title: 'Error',\r\n      message: 'Please choose a date in the future',\r\n      color: 'red',\r\n      position: 'topLeft',\r\n    });\r\n  } else startBtn.disabled = false;\r\n}\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\n"],"names":["dateInput","startBtn","date","startTime","selectedDatesValue","flatpickr","selectedDates","checkDate","endTime","currentTime","remainingTime","intervalId","updateTimer","days","hours","minutes","seconds","convertMs","iziToast","ms"],"mappings":"0IAKA,MAAMA,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAO,CACX,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EACAD,EAAS,iBAAiB,QAASE,CAAS,EAC5CF,EAAS,SAAW,GAEpB,IAAIG,EAAqB,GAEzBC,EAAUL,EAAW,CACnB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQM,EAAe,CACrBC,EAAUD,EAAc,EAAE,EAC1BF,EAAqBE,EAAc,EACpC,CACH,CAAC,EAED,SAASH,GAAY,CACnBF,EAAS,SAAW,GACpBD,EAAU,SAAW,GACrB,MAAMQ,EAAUJ,EAAmB,UAC7BK,EAAc,IAAI,KAAM,EAAC,QAAO,EACtC,IAAIC,EAAgBF,EAAUC,EAC1BE,EAAa,KAEjB,SAASC,GAAc,CACrB,GAAIF,EAAgB,EAAG,CACrB,KAAM,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUP,CAAa,EAEjER,EAAK,KAAK,YAAcW,GAAQ,EAAI,IAAMA,EAAOA,EACjDX,EAAK,MAAM,YAAcY,GAAS,EAAI,IAAMA,EAAQA,EACpDZ,EAAK,QAAQ,YAAca,GAAW,EAAI,IAAMA,EAAUA,EAC1Db,EAAK,QAAQ,YAAcc,GAAW,EAAI,IAAMA,EAAUA,EAE1DN,GAAiB,IACjBC,EAAa,WAAWC,EAAa,GAAI,CAC/C,MACMV,EAAK,KAAK,YAAc,KACxBA,EAAK,MAAM,YAAc,KACzBA,EAAK,QAAQ,YAAc,KAC3BA,EAAK,QAAQ,YAAc,KAC3BD,EAAS,SAAW,GACpBD,EAAU,SAAW,GACrB,cAAcW,CAAU,EACxBO,EAAS,KAAK,CACZ,MAAO,cACP,MAAO,QACP,SAAU,SAClB,CAAO,CAEJ,CAED,GAAI,CAACd,EAAoB,CACvBc,EAAS,KAAK,CAAE,QAAS,6BAA+B,CAAA,EACxD,MACD,CAEDN,GACF,CAEA,SAASL,EAAUL,EAAM,CACnBA,EAAK,QAAS,EAAG,IAAI,KAAM,EAAC,QAAO,GACrCD,EAAS,SAAW,GACpBiB,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,MAAO,MACP,SAAU,SAChB,CAAK,GACIjB,EAAS,SAAW,EAC7B,CAEA,SAASgB,EAAUE,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}